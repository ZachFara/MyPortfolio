/* Mobile UX improvements and bug fixes */

/* Improve touch targets */
@media (hover: none) and (pointer: coarse) {
  button, 
  a, 
  input[type="submit"], 
  input[type="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* iOS specific fixes */
@supports (-webkit-overflow-scrolling: touch) {
  #sidebar > .inner {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Fix iOS input zoom */
  input[type="text"],
  input[type="email"],
  textarea {
    font-size: 16px !important;
  }
}

/* Android specific fixes */
@media screen and (max-width: 1280px) {
  /* Fix for some Android browsers where sidebar toggle disappears */
  #sidebar .toggle {
    position: fixed !important;
    display: block !important;
    visibility: visible !important;
  }
  
  /* Ensure sidebar content is accessible */
  #sidebar.inactive {
    pointer-events: none;
  }
  
  #sidebar:not(.inactive) {
    pointer-events: all;
  }
  
  #sidebar .toggle {
    pointer-events: all !important;
  }
}

/* High DPI screen adjustments */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  #sidebar .toggle:before {
    transform: translateZ(0);
  }
}

/* Reduced motion preferences - but keep sidebar transition */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  /* Keep sidebar transition for usability */
  #sidebar {
    transition: margin-left 0.3s ease, box-shadow 0.3s ease !important;
  }
}

/* Focus improvements for accessibility */
#sidebar .toggle:focus {
  outline: none !important;
  box-shadow: none !important;
}

#sidebar .toggle:focus-visible {
  outline: 2px solid #2c2f9a;
  outline-offset: 2px;
}

/* Dark mode support for mobile devices */
@media (prefers-color-scheme: dark) {
  @media screen and (max-width: 1280px) {
    #sidebar:not(.inactive):before {
      background: rgba(0, 0, 0, 0.7);
    }
  }
}

/* Landscape tablet improvements */
@media screen and (min-width: 737px) and (max-width: 1280px) and (orientation: landscape) {
  #sidebar {
    width: 20em !important;
  }
  
  #sidebar > .inner {
    width: 20em !important;
  }
  
  #sidebar .toggle {
    left: 20em !important;
  }
  
  #sidebar.inactive {
    margin-left: -20em !important;
  }
}

/* Very wide mobile screens (like iPhone Pro Max) */
@media screen and (min-width: 400px) and (max-width: 736px) {
  #sidebar {
    width: 22em !important;
  }
  
  #sidebar > .inner {
    width: 22em !important;
  }
  
  #sidebar .toggle {
    left: 22em !important;
  }
  
  #sidebar.inactive {
    margin-left: -22em !important;
  }
}

/* Fix for potential z-index issues */
#sidebar {
  z-index: 10000;
}

#sidebar .toggle {
  z-index: 10001;
}

/* Ensure proper stacking context */
#wrapper {
  position: relative;
  z-index: 1;
}

#main {
  position: relative;
  z-index: 2;
}
